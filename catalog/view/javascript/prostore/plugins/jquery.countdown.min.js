!function(n,h,o){"use strict";var a="countDown",e={css_class:"countdown",always_show_days:!1,with_labels:!0,with_seconds:!0,with_separators:!0,with_hh_leading_zero:!0,with_mm_leading_zero:!0,with_ss_leading_zero:!0,label_dd:"days",label_hh:"hours",label_mm:"minutes",label_ss:"seconds",separator:":",separator_days:","};function m(t,s){this.element=n(t),this.options=n.extend({},e,s),this._defaults=e,this._name=a,this.init()}n.extend(m.prototype,{init:function(){this.element.children().length||(this.element.attr("datetime")&&(this.endDate=this.parseEndDate(this.element.attr("datetime"))),this.endDate===o&&(this.endDate=this.parseEndDate(this.element.text())),this.endDate!==o&&(this.element.is("time")?this.timeElement=this.element:(this.timeElement=n("<time></time>"),this.element.html(this.timeElement)),this.markup(),this.setTimeoutDelay=this.sToMs(1),this.daysVisible=!0,this.timeElement.on("time.elapsed",this.options.onTimeElapsed),this.timeElement.on("time.tick",this.options.onTick),this.doCountDown()))},parseEndDate:function(t){var s=this.parseDuration(t);return s instanceof Date||(s=this.parseDateTime(t))instanceof Date||(s=this.parseHumanReadableDuration(t))instanceof Date?s:(s=Date.parse(t),isNaN(s)?void 0:new Date(s))},parseDuration:function(t){var s=t.match(/^P(?:(\d+)D)?T?(?:(\d+)H)?(?:(\d+)M)?(?:(\d+)(?:\.(\d{1,3}))?S)?$/);if(s){var e=s[1]?this.dToMs(s[1]):0,i=s[2]?this.hToMs(s[2]):0,n=s[3]?this.mToMs(s[3]):0,a=s[4]?this.sToMs(s[4]):0,t=s[5]?parseInt(s[5],10):0,s=new Date;return s.setTime(s.getTime()+e+i+n+a+t),s}},parseDateTime:function(t){var s=t.match(/^(\d{4,})-(\d{2})-(\d{2})[T\s](\d{2}):(\d{2})(?:\:(\d{2}))?(?:\.(\d{1,3}))?([Z\+\-\:\d]+)?$/);if(s){var e,i,n,a,h=s[8]?s[8].match(/^([\+\-])?(\d{2}):?(\d{2})$/):o,m=0;return h&&(m=this.hToMs(h[2])+this.mToMs(h[3]),m="-"===h[1]?m:-m),e=s[1],i=s[2]-1,n=s[3],a=s[4]||0,t=s[5]||0,h=s[6]||0,s=s[7]||0,(s=new Date(Date.UTC(e,i,n,a,t,h,s))).setTime(s.getTime()+m),s}},parseHumanReadableDuration:function(t){var s=t.match(/^(?:(\d+).+\s)?(\d+)[h:]\s?(\d+)[m:]?\s?(\d+)?[s]?(?:\.(\d{1,3}))?$/);if(s){var e=new Date,i=s[1]?this.dToMs(s[1]):0,n=s[2]?this.hToMs(s[2]):0,a=s[3]?this.mToMs(s[3]):0,t=s[4]?this.sToMs(s[4]):0,s=s[5]?parseInt(s[5],10):0;return e.setTime(e.getTime()+i+n+a+t+s),e}},sToMs:function(t){return 1e3*parseInt(t,10)},mToMs:function(t){return 60*parseInt(t,10)*1e3},hToMs:function(t){return 60*parseInt(t,10)*60*1e3},dToMs:function(t){return 24*parseInt(t,10)*60*60*1e3},msToS:function(t){return parseInt(t/1e3%60,10)},msToM:function(t){return parseInt(t/1e3/60%60,10)},msToH:function(t){return parseInt(t/1e3/60/60%24,10)},msToD:function(t){return parseInt(t/1e3/60/60/24,10)},markup:function(){var t=['<span class="item item-dd">','<span class="dd"></span>','<span class="label label-dd">',this.options.label_dd,"</span>","</span>",'<span class="separator separator-dd">',this.options.separator_days,"</span>",'<span class="item item-hh">','<span class="hh-1"></span>','<span class="hh-2"></span>','<span class="label label-hh">',this.options.label_hh,"</span>","</span>",'<span class="separator">',this.options.separator,"</span>",'<span class="item item-mm">','<span class="mm-1"></span>','<span class="mm-2"></span>','<span class="label label-mm">',this.options.label_mm,"</span>","</span>",'<span class="separator">',this.options.separator,"</span>",'<span class="item item-ss">','<span class="ss-1"></span>','<span class="ss-2"></span>','<span class="label label-ss">',this.options.label_ss,"</span>","</span>"];this.timeElement.html(t.join("")),this.options.with_labels||this.timeElement.find(".label").remove(),this.options.with_separators||this.timeElement.find(".separator").remove(),this.options.with_seconds||(this.timeElement.find(".item-ss").remove(),this.timeElement.find(".separator").last().remove()),this.item_dd=this.timeElement.find(".item-dd"),this.separator_dd=this.timeElement.find(".separator-dd"),this.remaining_dd=this.timeElement.find(".dd"),this.remaining_hh1=this.timeElement.find(".hh-1"),this.remaining_hh2=this.timeElement.find(".hh-2"),this.remaining_mm1=this.timeElement.find(".mm-1"),this.remaining_mm2=this.timeElement.find(".mm-2"),this.remaining_ss1=this.timeElement.find(".ss-1"),this.remaining_ss2=this.timeElement.find(".ss-2"),this.timeElement.addClass(this.options.css_class)},doCountDown:function(){var t=this.endDate.getTime()-(new Date).getTime(),s=this.msToS(t),e=this.msToM(t),i=this.msToH(t),n=this.msToD(t);if(t<=0&&(s=e=i=n=0),this.displayRemainingTime({ss:s<10?(this.options.with_ss_leading_zero?"0":" ")+s.toString():s.toString(),mm:e<10?(this.options.with_mm_leading_zero?"0":" ")+e.toString():e.toString(),hh:i<10?(this.options.with_hh_leading_zero?"0":" ")+i.toString():i.toString(),dd:n.toString()}),this.options.with_seconds||0!==n||0!==e||0!==i||(s=0),0===n&&0===e&&0===i&&0===s)return this.timeElement.trigger("time.elapsed");var a=this;return h.setTimeout(function(){a.doCountDown()},a.setTimeoutDelay),this.timeElement.trigger("time.tick",t)},displayRemainingTime:function(t){var s=[];s.push("P"),"0"!==t.dd&&s.push(t.dd,"D"),s.push("T",t.hh,"H",t.mm,"M"),this.options.with_seconds&&s.push(t.ss,"S"),this.timeElement.attr("datetime",s.join("")),this.daysVisible&&!this.options.always_show_days&&"0"===t.dd&&(this.item_dd.remove(),this.separator_dd.remove(),this.daysVisible=!1),this.remaining_dd.text(t.dd),this.remaining_hh1.text(t.hh[0].trim()),this.remaining_hh2.text(t.hh[1]),this.remaining_mm1.text(t.mm[0].trim()),this.remaining_mm2.text(t.mm[1]),this.remaining_ss1.text(t.ss[0].trim()),this.remaining_ss2.text(t.ss[1])}}),n.fn[a]=function(s){var e,i=arguments;return s===o||"object"==typeof s?this.each(function(){n.data(this,"plugin_"+a)||n.data(this,"plugin_"+a,new m(this,s))}):"string"==typeof s&&"_"!==s[0]&&"init"!==s?(this.each(function(){var t=n.data(this,"plugin_"+a);t instanceof m&&"function"==typeof t[s]&&(e=t[s].apply(t,Array.prototype.slice.call(i,1))),"destroy"===s&&n.data(this,"plugin_"+a,null)}),e!==o?e:this):void 0}}(window.jQuery,window,void document);